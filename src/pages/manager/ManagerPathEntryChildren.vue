<script setup lang="ts">
import Lang from '../../components/Lang.vue'
import ManagerPathEntry from './ManagerPathEntry.vue'
import ManagerPathEntryChildrenPagination from './ManagerPathEntryChildrenPagination.vue'
import { PathEntryDirectory } from './PathEntry'
import { State } from './State'

defineProps<{
  state: State
  pathEntry: PathEntryDirectory
}>()
</script>

<template>
  <div v-if="pathEntry.kind === 'Directory' && pathEntry.isOpen" class="pl-2">
    <template v-if="pathEntry.children.length === 0">
      <Lang class="border-l border-black pl-2 text-stone-400">
        <template #zh> ç©º </template>
        <template #en> empty </template>
      </Lang>
    </template>

    <template v-else>
      <ManagerPathEntry
        class="border-l border-black"
        v-for="child of pathEntry.children"
        :key="child.path"
        :state="state"
        :pathEntry="child"
      />
    </template>

    <ManagerPathEntryChildrenPagination
      class="bg-black text-sm text-white"
      :class="[pathEntry.isChildrenLoading && 'bg-yellow-600 text-yellow-600']"
      :state="state"
      :pathEntry="pathEntry"
    />
  </div>
</template>
